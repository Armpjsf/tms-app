{
  "meta": {
    "project": "web_app",
    "date": "2026-02-15",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "A Next.js + Supabase frontend for a transport management system that provides staff/admin and driver authentication plus user profile management (update name and email). The UI is built with Tailwind and Radix UI; authentication and profile updates use Supabase server actions.",
  "core_goals": [
    "Provide secure email/username + password authentication for staff/admin users at /login",
    "Provide a mobile-optimized driver login at /mobile/login for drivers to authenticate and start mobile sessions",
    "Allow authenticated users to manage their profile (first name, last name, email) at /settings/profile with persisted updates via Supabase",
    "Keep navigation and route protections consistent (authenticated routes: /dashboard and /settings pages)"
  ],
  "features": [
    {
      "name": "Staff Login",
      "description": "Administrative users log in with username/email and password on the staff login page to access the admin dashboard.",
      "user_flows": [
        "Navigate to /login -> Enter Username or Email -> Enter Password -> Click Login button -> Redirected to /dashboard",
        "Navigate to /login -> Enter Username or Email -> Leave Password field empty -> Click Login button -> See inline validation error for missing password on /login",
        "Navigate to /login -> Enter Username or Email -> Enter Password (incorrect) -> Click Login button -> See authentication error and remain on /login"
      ]
    },
    {
      "name": "Driver Login",
      "description": "Drivers authenticate on the mobile-specific login route with Driver ID/Username and password to start their mobile session.",
      "user_flows": [
        "Navigate to /mobile/login -> Enter Driver ID/Username -> Enter Password -> Click Login button -> See successful driver session established (mobile app home / session created)",
        "Navigate to /mobile/login -> Enter Driver ID/Username -> Leave Password field empty -> Click Login button -> See validation error indicating password required",
        "Navigate to /mobile/login -> Enter Driver ID/Username -> Enter Password (invalid) -> Click Login button -> See authentication failure message and remain on /mobile/login"
      ]
    },
    {
      "name": "Profile Management",
      "description": "Authenticated users update their first name, last name and email at /settings/profile; changes are persisted with a Supabase server action.",
      "user_flows": [
        "Navigate to /settings/profile -> Update First Name field -> Update Last Name field -> Update Email field -> Click \"บันทึกการเปลี่ยนแปลง\" (Save Changes) button -> See confirmation and profile values persisted on /settings/profile",
        "Navigate to /settings/profile -> Update First Name field -> Update Last Name field -> Enter invalid Email (bad format) -> Click \"บันทึกการเปลี่ยนแปลง\" (Save Changes) button -> See client-side validation error for email format and remain on /settings/profile",
        "Navigate to /settings/profile -> Update First Name field -> Update Last Name field -> Update Email field -> Click \"บันทึกการเปลี่ยนแปลง\" (Save Changes) button -> Server update fails (network or server action error) -> See server error banner and changes not persisted"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      {
        "Language": "TypeScript"
      },
      {
        "Framework": "Next.js 16 (App Router)"
      },
      {
        "Database/Auth": "Supabase"
      },
      {
        "UI library": "Tailwind CSS 4, Radix UI"
      },
      {
        "Animations": "Framer Motion"
      },
      {
        "Icons": "Lucide React"
      }
    ],
    "routes": [
      {
        "path": "/login",
        "file": "src/app/login/page.tsx",
        "auth_required": false,
        "description": "Staff/Admin login page"
      },
      {
        "path": "/mobile/login",
        "file": "src/app/mobile/login/page.tsx",
        "auth_required": false,
        "description": "Driver login page"
      },
      {
        "path": "/dashboard",
        "file": "src/app/dashboard/page.tsx",
        "auth_required": true,
        "description": "Main admin dashboard"
      },
      {
        "path": "/settings",
        "file": "src/app/settings/page.tsx",
        "auth_required": true,
        "description": "System settings overview"
      },
      {
        "path": "/settings/profile",
        "file": "src/app/settings/profile/page.tsx",
        "auth_required": true,
        "description": "User profile management"
      }
    ],
    "features": [
      {
        "name": "Staff Login",
        "description": "Login with username/email and password for administrative users",
        "files": [
          "src/app/login/page.tsx",
          "src/app/login/actions.ts"
        ],
        "entry_route": "/login",
        "user_interactions": [
          "Enter Username or Email",
          "Enter Password",
          "Click Login button"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "src/app/login/actions.ts (login function)"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Driver Login",
        "description": "Login for drivers at the mobile-specific route",
        "files": [
          "src/app/mobile/login/page.tsx",
          "src/lib/actions/auth-actions.ts"
        ],
        "entry_route": "/mobile/login",
        "user_interactions": [
          "Enter Driver ID/Username",
          "Enter Password",
          "Click Login button"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "src/lib/actions/auth-actions.ts (loginDriver function)"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Profile Management",
        "description": "Users can update their first name, last name, and email",
        "files": [
          "src/app/settings/profile/page.tsx",
          "src/lib/supabase/users.ts"
        ],
        "entry_route": "/settings/profile",
        "user_interactions": [
          "Update First Name field",
          "Update Last Name field",
          "Update Email field",
          "Click \"บันทึกการเปลี่ยนแปลง\" (Save Changes) button"
        ],
        "api_calls": [
          {
            "method": "UPDATE (via server action)",
            "endpoint": "src/lib/supabase/users.ts (updateUserProfile function)"
          }
        ],
        "auth_required": true
      }
    ],
    "known_limitations": []
  }
}
